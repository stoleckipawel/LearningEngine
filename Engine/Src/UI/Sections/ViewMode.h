// ============================================================================
// ViewMode.h
// ----------------------------------------------------------------------------
// UI section for selecting debug visualization modes.
//
// USAGE:
//   ViewMode viewMode;
//   auto currentMode = viewMode.Get();
//   viewMode.BuildUI();  // Called each frame in ImGui context
//
// DESIGN:
//   - Implements UIRendererSection interface for panel integration
//   - Type enum maps to ViewModes.hlsli shader defines
//   - Renders radio buttons for each view mode option
//
// SYNC WITH:
//   Debug/ViewModes.hlsli (shader view mode indices)
// ============================================================================

#pragma once

#include <cstdint>

#include "Framework/UIRendererSection.h"

class ViewMode final : public UIRendererSection
{
  public:
	enum class Type : std::uint8_t  // Keep in sync with Debug/ViewModes.hlsli
	{
		Lit = 0,
		GBufferDiffuse,
		GBufferNormal,
		GBufferRoughness,
		GBufferMetallic,
		GBufferEmissive,
		GBufferAmbientOcclusion,
		GBufferSubsurfaceColor,
		GBufferSubsurfaceStrength,
		DirectDiffuse,
		DirectSpecular,
		DirectSubsurface,
		IndirectDiffuse,
		IndirectSpecular,
		Count
	};

	ViewMode() noexcept = default;
	~ViewMode() = default;

	ViewMode(const ViewMode&) = delete;
	ViewMode(ViewMode&&) = delete;
	ViewMode& operator=(const ViewMode&) = delete;
	ViewMode& operator=(ViewMode&&) = delete;

	Type Get() const noexcept { return m_mode; }
	void Set(Type mode) noexcept { m_mode = mode; }


	UIRendererSectionId GetId() const noexcept override { return UIRendererSectionId::ViewMode; }
	const char* GetTitle() const noexcept override { return "View Modes"; }

	// Builds the view mode controls. Renders only contents; window/layout is owned by the caller.
	void BuildUI() override;

  private:
	Type m_mode = Type::Lit;
};
